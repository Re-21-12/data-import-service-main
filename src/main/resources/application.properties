spring.application.name=data-import-service

# Cadena proporcionada (guardada como referencia / fallback)
# IMPORTANT: DefaultConnection debe ser una JDBC URL válida para que Spring Boot la use
# Cambiado a formato JDBC. Las credenciales siguen viniendo de SPRING_DATASOURCE_USERNAME/PASSWORD
DefaultConnection=jdbc:sqlserver://sqlserver:1433;databaseName=Tablero_DB;trustServerCertificate=true;

# Configuración de datasource (usa variables de entorno si están definidas)
# Orden de prioridad para la URL JDBC:
# 1) SPRING_DATASOURCE_URL (env)
# 2) DefaultConnection (env or property) -> convertido a JDBC si es necesario
# 3) fallback hardcoded jdbc URL
# Nota: si `DefaultConnection` tiene la forma "Server=...;Database=...;..." Spring espera un JDBC URL, por eso permitimos que se pase directamente a SPRING_DATASOURCE_URL.
# SPRING_DATASOURCE_URL should be a JDBC URL, e.g.: jdbc:sqlserver://sqlserver:1433;databaseName=Tablero_DB;trustServerCertificate=true;
spring.datasource.url=${SPRING_DATASOURCE_URL:${DefaultConnection:jdbc:sqlserver://sqlserver:1433;databaseName=Tablero_DB;trustServerCertificate=true;}}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:sa}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:YourStrong!Passw0rd}
spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false

# Opcional: especificar dialecto si quieres control más fino
spring.jpa.database-platform=org.hibernate.dialect.SQLServerDialect

# Límites de subida (ajusta según necesites)
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=20MB

# Validación estricta de JSON
spring.jackson.deserialization.fail-on-unknown-properties=true
spring.jackson.deserialization.fail-on-null-for-primitives=true

# Logging de SQL para debug
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE